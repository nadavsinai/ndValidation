!function(){"use strict";angular.module("ndValidation").factory("config",function(){var e={},t={get:function(t,n){return n?void(angular.isDefined(e[t])&&n(e[t])):e[t]},set:function(t,n){e[t]=n}};return t}).run(["$rootScope","config",function(e,t){e.$validationConfig=t}])}(),function(){"use strict";angular.module("ndValidation").directive("ndValidation",["$compile","ndValidationSvc","$log","config",function(e,t,n,a){return{restrict:"A",priority:1e3,terminal:!0,compile:function(){return{post:function(i,r,o){r.removeAttr("nd-validation");var u,s=o.ngModel.replace(/\.\w{0,}/g,""),c=i[s],l=o.ngModel.replace(/.*\./g,"");u=i.hasOwnProperty("$index")?l+"_"+i.$index:l;var d=o.ndValidation?i.$eval(o.ndValidation):t.getDefaultValidationSource(c);if(d){if(d[l]){var f=d[l],g=function(e,n){var a=t.addMessage(u,e,n);return angular.element("<validation-message input='"+a.input+"' key='"+a.key+"'></validation-message>")};angular.forEach(f,function(t,n){angular.isArray(t)||(t=[t]),angular.forEach(t,function(t){switch("string"==typeof t&&(t={message:t}),n){case"format":switch(t.type){case"url":r.attr("type","url"),r.after(e(g("url",t))(i));break;case"email":r.attr("type","email"),r.after(e(g("email",t))(i));break;case"number":r.attr("type","number"),r.after(e(g("number",t))(i));break;case"pattern":r.attr("ng-pattern",t.pattern),r.after(e(g("pattern",t))(i))}break;case"length":t.min&&(r.attr("ng-minlength",t.min),r.after(e(g("minlength",t))(i))),t.max&&(r.attr("ng-maxlength",t.min),r.after(e(g("maxlength",t))(i)));break;case"equality":var o=t.otherValue||t.otherModel;r.attr("ui-validate","'$value=="+s+"."+o+"'"),t.otherModel&&r.attr("ui-validate-watch","'"+s+"."+o+"'"),r.after(e(g("validator",t))(i));break;case"custom":if("function"==typeof t.functionObj){var c="ndValidation_"+u+"_"+Math.floor(100*Math.random());a.set(c,t.functionObj),r.attr("ui-validate","{"+c+":\"$validationConfig.get('"+c+"')($value)\"}"),r.after(e(g(c,t))(i))}break;case"required":r.attr("required","required"),r.after(e(g("required",t))(i))}})})}}else n.error("Validation source is not an object, can not parse rules");e(r)(i)}}}}}]).directive("ngModel",["ndValidationSvc","$timeout",function(e,t){return{restrict:"A",require:"^ngModel",compile:function(){return{post:function(n,a,i,r){var o=i.ngModel.replace(/.*\./g,"");n.hasOwnProperty("$index")&&(o+="_"+n.$index);var u=e.getWatchers(o),s=[];if(u){angular.forEach(u,function(e){s.push(e.key)});var c=function(e){return t(function(){s.forEach(function(e){r.$error[e]?u[e].show():u[e].hide()})}),e};r.$parsers.push(c),r.$viewChangeListeners.push(c),n.$on("$destroy",function(){e.clearWatchers()})}}}}}}]).directive("validationMessage",["ndValidationSvc","$translate","$log",function(e,t,n){return{restrict:"E",replace:!0,template:"<span class='help-block alert-warning hidden'></span>",link:function(a,i,r){var o=e.subscribe(r.input,r.key);o.message&&t(o.message,o.translationProperties).then(function(e){i.html(e)},function(e){n.info("Validation for "+r.input+" input validation key "+r.key+' was not translated  - "'+e+'"'),i.html(o.message)}),o.show=function(){i.removeClass("hidden")},o.hide=function(){i.addClass("hidden")}}}}])}(),function(){"use strict";angular.module("ndValidation",["ui.validate"]).provider("ndValidationSvc",function(){function e(e,t,n){this.translationProperties=angular.extend({input:t.charAt(0).toUpperCase()+t.substr(1).replace(/_.*/g,"")},n),delete this.translationProperties.message,this.message=n.message,this.key=e,this.input=t}var t=null,n={};this.setDefaultValidationSource=function(e){t=e},this.$get=function(){return{getDefaultValidationSource:function(e){return e[t]},addMessage:function(t,a,i){var r=new e(a,t,i);return n[t]||(n[t]={}),n[t][a]=r,r},hideMessages:function(e){angular.forEach(n[e],function(e){"function"==typeof e.hide&&e.hide()})},subscribe:function(e,t){return n[e]&&n[e][t]?n[e][t]:!1},getWatchers:function(e){return n[e]},clearWatchers:function(){n={}}}}})}();